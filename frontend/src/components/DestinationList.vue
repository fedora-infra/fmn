<script setup lang="ts">
import type { QueryFunction } from "react-query/types/core";
import { useQuery } from "vue-query";
import { apiGet } from "../api";
import type { Destination } from "../api/types";
import { useUserStore } from "../stores/user";
import Multiselect from '@vueform/multiselect'

const userStore = useUserStore();
const route = `/user/${userStore.username}/destinations`;
const { isLoading, isError, data, error } = useQuery(
  route,
  apiGet as QueryFunction<Destination[]>
);
</script>

<template>
  <span v-if="isLoading">Loading...</span>
  <span v-else-if="isError">Error: {{ error }}</span>
  <!-- We can assume by this point that `isSuccess === true` -->
  <div v-else>
    <Multiselect
  v-model="value"
  mode="tags"
  :close-on-select="false"
  :groups="true"
  :options="data"
/>
  </div>
</template>
